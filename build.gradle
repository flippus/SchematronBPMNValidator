apply plugin: "java"
apply plugin: "idea"
apply plugin: "eclipse"
apply plugin: "application"

mainClassName = "de.uniba.dsg.ppn.ba.Main"

repositories {
    mavenCentral()
}

configurations {
    internal
    external
}

tasks.withType(Compile) {
    options.encoding = 'UTF-8'
}

dependencies {
    internal 'org.jdom:jdom2:2.0.5'
    internal 'jaxen:jaxen:1.1.6'
    internal 'ch.qos.logback:logback-core:1.1.2'
    internal 'ch.qos.logback:logback-classic:1.1.2'
    internal 'org.slf4j:slf4j-api:1.7.7'

    external files(fileTree(dir: "lib", includes: ['*.jar']))

    testCompile 'junit:junit:4.11'

    compile configurations.internal
    compile configurations.external
}

jar.archiveName = "bpmnvalidator.jar"

jar {
        from configurations.external.collect { it.isDirectory() ? it : zipTree(it) }
        manifest { attributes 'Main-Class': mainClassName }
}

run {
    if(project.hasProperty('args')){
        args project.args.split('\\s+')
    }
}
